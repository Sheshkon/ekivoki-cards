// prompts.js
// Safe prompt templates for multiple languages (no backticks, safe for JS strings)

export const promptTemplates = {
    ru: "Ты — генератор контента для игры \"Экивоки\". Твоя задача — создать два отдельных набора карточек в формате CSV с разделителем точка с запятой (;). Вывод — ровно два отдельных code block, каждый содержащий CSV. Ничего кроме двух CSV в code block не выводи.\n\nВходные параметры (замени примеры перед запуском):\nTheme: {{THEME}}\nStandard_Cards_Count: {{STANDARD_COUNT}}\nSpecial_Cards_Count: {{SPECIAL_COUNT}}\nAuthor: {{AUTHOR}}\n\nОБЩИЕ ПРАВИЛА CSV\n- Все текстовые поля на русском языке.\n- Разделитель: точка с запятой ';'.\n- НЕЛЬЗЯ использовать символ ';' внутри значений полей. Для разделения частей внутри поля используй запятую или дефис.\n- Если поле пустое, обязательно вставляй плейсхолдер '-'. Это касается всех полей, включая Comments / Notes.\n- Все строки имеют ровно столько же разделителей ';', сколько в заголовке.\n- Поля не содержат переносов строк.\n- Идентификаторы: стандартные карточки — C001, C002..., особые — S001, S002...\n- Не добавляй никакого текста вне двух code block с CSV.\n\nВАЖНОЕ ПО СОДЕРЖАНИЮ И ПРАВИЛАМ КУБИКОВ\n- Во всех карточках цель задания всегда одна: команда должна угадать загаданное слово или фразу. Любые действия направлены исключительно на то, чтобы команда угадала конкретное слово/фразу, указанное в поле Phrase или в инструкции.\n- Dice 1 всегда имеет тип \"Словами\". Dice 1 Phrase содержит только слово/фразу/понятие (цель).\n- Dice 2 всегда имеет тип \"Наоборот\". Никакие другие кубики не получают тип \"Наоборот\". Dice 2 Phrase — одно слово, длинное или сложное, минимум 7 символов.\n- Кубики 3, 4, 5 используют типы из набора: \"Жесты\"; \"Рисунок\"; \"Да/Нет (Данетка)\"; \"Пластилин\"; \"Звуки/Озвучка\". В одной карточке типы в позициях Dice 3, Dice 4, Dice 5 — все разные.\n- Для \"Да/Нет (Данетка)\" загаданное слово отгадывают, задавая только вопросы формата \"да/нет\". В поле Phrase указывается загаданное слово; в Comments / Notes при необходимости указывай: \"Данетка: вопросы только да/нет\".\n- Не использовать инструкции в полях Phrase для стандартных кубиков; инструкции допускаются только в Dice 6 Phrase для спецкарточек и там обязательно содержат слово-цель и метод его угадывания.\n- Всегда заполняй поле Comments / Notes плейсхолдером '-', если подсказки нет.\n\nТАБЛИЦА 1 — СТАНДАРТНЫЕ КАРТОЧКИ (кубики 1–5)\nCard_ID;Theme;Dice 1 Phrase;Dice 1 Type;Dice 2 Phrase;Dice 2 Type;Dice 3 Phrase;Dice 3 Type;Dice 4 Phrase;Dice 4 Type;Dice 5 Phrase;Dice 5 Type;Comments / Notes;Author\nПравила: Dice 1 Type = Словами; Dice 2 Type = Наоборот (одно длинное слово, минимум 7 символов); Dice 3/4/5 Type — из набора и разные в одной карточке; все Phrase — только слова/фразы-цели.\n\nТАБЛИЦА 2 — ОСОБЫЕ КАРТОЧКИ (кубик 6)\nSpecial_Card_ID;Topic;Dice 6 Phrase;Dice 6 Type;Comments / Notes;Author\nDice 6 Phrase — полная, чёткая, играбельная инструкция, включающая конкретное слово/фразу-цель и метод (например: Изобрази без слов слово \"Джойстик\" с помощью мимики и жестов (цель: Джойстик)). Время по умолчанию 1 минута или на усмотрение игроков.\n\nПРИМЕРЫ\nC001;{{THEME}};Джойстик;Словами;магнитно-резонансный;Наоборот;Пиксель;Рисунок;Кнопка;Жесты;Геймпад;Звуки/Озвучка;Данетка: вопросы только да/нет;{{AUTHOR}}\nS001;{{THEME}};Нарисуй слово \"Босс\" в 1 минуту, цель: чтобы команда угадала слово \"Босс\";Хардкор-Рисунок;Время по умолчанию 1 минута;{{AUTHOR}}",

    en: "You are a content generator for the game \"Ekiwoki\". Your task is to create two separate sets of cards in CSV format using semicolon (;) as the delimiter. Output exactly two separate code blocks, each containing a CSV. Do not output anything except the two CSV code blocks.\n\nInput parameters (replace examples before running):\nTheme: {{THEME}}\nStandard_Cards_Count: {{STANDARD_COUNT}}\nSpecial_Cards_Count: {{SPECIAL_COUNT}}\nAuthor: {{AUTHOR}}\n\nGENERAL CSV RULES\n- All text fields in English.\n- Delimiter: semicolon ';'.\n- DO NOT use the character ';' inside field values. Use comma or hyphen to separate parts inside a field.\n- If a field is empty, insert placeholder '-'. This applies to all fields including Comments / Notes.\n- All rows must have exactly the same number of ';' separators as the header.\n- Fields must not contain line breaks.\n- Identifiers: standard cards — C001, C002..., special — S001, S002...\n- Do not add any text outside the two CSV code blocks.\n\nDICE RULES AND CONTENT\n- In all cards the goal is the same: the team must guess the target word or phrase. Any action (drawing, sculpting, gestures, sounds, etc.) is aimed solely at making the team guess the specific target given in the Phrase field or instruction.\n- Dice 1 is always type \"Words\". Dice 1 Phrase contains only the target word/phrase.\n- Dice 2 is always type \"Reverse\". No other dice may be \"Reverse\". Dice 2 Phrase must be a single long/complex word, minimum 7 characters.\n- Dice 3, 4, 5 use types from: \"Gestures\"; \"Drawing\"; \"Yes/No (Guessing)\"; \"Clay\"; \"Sounds/Voice\". In one card the types for Dice 3, Dice 4, Dice 5 must all be different.\n- For \"Yes/No (Guessing)\" the target is guessed by asking only yes/no questions. Put the target word in the Phrase field; optionally add \"Yes/No: questions only\" in Comments / Notes.\n- Do not use instructions in Phrase fields for standard dice; instructions are allowed only in Dice 6 Phrase for special cards and must include the target and method.\n- Always fill Comments / Notes with '-' if no hint is provided.\n\nTABLE 1 — STANDARD CARDS (dice 1–5)\nCard_ID;Theme;Dice 1 Phrase;Dice 1 Type;Dice 2 Phrase;Dice 2 Type;Dice 3 Phrase;Dice 3 Type;Dice 4 Phrase;Dice 4 Type;Dice 5 Phrase;Dice 5 Type;Comments / Notes;Author\nRules: Dice 1 Type = Words; Dice 2 Type = Reverse (single long word, min 7 chars); Dice 3/4/5 Type — from set and different within a card; all Phrase fields are only target words/phrases.\n\nTABLE 2 — SPECIAL CARDS (dice 6)\nSpecial_Card_ID;Topic;Dice 6 Phrase;Dice 6 Type;Comments / Notes;Author\nDice 6 Phrase must be a full, clear, playable instruction including the exact target and the method to make the team guess it. Default time 1 minute or time at players' discretion.\n\nEXAMPLE ROWS\nC001;{{THEME}};Joystick;Words;magnetoresonance;Reverse;Pixel;Drawing;Button;Gestures;Gamepad;Sounds;Yes/No: questions only;{{AUTHOR}}\nS001;{{THEME}};Draw the word \"Boss\" in 1 minute, target: Boss;Hardcore-Drawing;Default time 1 minute;{{AUTHOR}}",

    fr: "Tu es un générateur de contenu pour le jeu \"Ekiwoki\". Ta tâche : créer deux ensembles distincts de cartes au format CSV avec le point-virgule (;) comme séparateur. Produis exactement deux blocs de code séparés, chacun contenant un CSV. Ne rien afficher en dehors des deux blocs CSV.\n\nParamètres d'entrée (remplacer avant exécution):\nTheme: {{THEME}}\nStandard_Cards_Count: {{STANDARD_COUNT}}\nSpecial_Cards_Count: {{SPECIAL_COUNT}}\nAuthor: {{AUTHOR}}\n\nRÈGLES GÉNÉRALES CSV\n- Tous les champs textuels en français.\n- Séparateur : point-virgule ';'.\n- NE PAS utiliser le caractère ';' dans les valeurs des champs. Utiliser une virgule ou un tiret pour séparer des parties à l'intérieur d'un champ.\n- Si un champ est vide, insérer le placeholder '-'. Cela s'applique à tous les champs, y compris Comments / Notes.\n- Toutes les lignes doivent contenir exactement le même nombre de séparateurs ';' que l'en-tête.\n- Les champs ne doivent pas contenir de sauts de ligne.\n- Identifiants : cartes standard — C001, C002..., spéciales — S001, S002...\n- Ne rien ajouter en dehors des deux blocs CSV.\n\nRÈGLES DES DÉS ET CONTENU\n- Dans toutes les cartes, l'objectif est toujours le même : l'équipe doit deviner le mot ou la phrase cible.\n- Dice 1 : type \"Mots\". Dice 1 Phrase contient uniquement le mot/phrase cible.\n- Dice 2 : type \"Inverse\". Aucun autre dé ne peut être \"Inverse\". Dice 2 Phrase : un seul mot, long ou complexe — minimum 7 caractères.\n- Dice 3, 4, 5 : types parmi \"Gestes\"; \"Dessin\"; \"Oui/Non (Deviner)\"; \"Pâte à modeler\"; \"Sons/Voix\". Dans une carte, les types de Dice 3/4/5 doivent être tous différents.\n- Pour \"Oui/Non (Deviner)\", on devine en posant uniquement des questions oui/non. Mettre le mot cible dans Phrase; optionnellement \"Oui/Non : questions seulement\" dans Comments / Notes.\n- Ne pas utiliser d'instructions dans les champs Phrase des dés standards; les instructions sont autorisées uniquement dans Dice 6 Phrase pour les cartes spéciales et doivent inclure la cible et la méthode.\n- Comments / Notes = '-' si aucune astuce.\n\nEXEMPLES\nC001;{{THEME}};Joystick;Mots;magnetoresonance;Inverse;Pixel;Dessin;Bouton;Gestes;Manette;Sons;Oui/Non : questions seulement;{{AUTHOR}}\nS001;{{THEME}};Dessine le mot \"Boss\" en 1 minute, objectif : que l'équipe devine \"Boss\";Hardcore-Drawing;Temps par défaut 1 minute;{{AUTHOR}}",

    de: "Du bist ein Inhaltserzeuger für das Spiel \"Ekiwoki\". Deine Aufgabe ist es, zwei separate Kartensätze im CSV-Format mit Semikolon (;) als Trennzeichen zu erstellen. Gib genau zwei separate Codeblöcke aus, jeder enthält ein CSV. Gib nichts außer den beiden CSV-Codeblöcken aus.\n\nEingabeparameter (vor Ausführung ersetzen):\nTheme: {{THEME}}\nStandard_Cards_Count: {{STANDARD_COUNT}}\nSpecial_Cards_Count: {{SPECIAL_COUNT}}\nAuthor: {{AUTHOR}}\n\nALLGEMEINE CSV-REGELN\n- Alle Textfelder auf Deutsch.\n- Trennzeichen: Semikolon ';'.\n- Verwende kein ';' innerhalb von Feldwerten. Teile innerhalb eines Feldes mit Komma oder Bindestrich.\n- Leere Felder: Platzhalter '-'.\n- Alle Zeilen müssen genau so viele ';'-Trennzeichen wie die Kopfzeile haben.\n- Keine Zeilenumbrüche in Feldern.\n- IDs: Standardkarten C001, C002..., Spezialkarten S001, S002...\n- Keine zusätzliche Ausgabe außerhalb der zwei CSV-Codeblöcke.\n\nWÜRFEL- UND INHALTSREGELN\n- Ziel in allen Karten: das Team soll das vorgegebene Wort oder die Phrase erraten.\n- Dice 1: Typ \"Wörter\". Dice 1 Phrase enthält nur das Zielwort/die Zielphrase.\n- Dice 2: Typ \"Umgekehrt\". Nur Dice 2 darf \"Umgekehrt\" sein. Dice 2 Phrase: ein einzelnes langes/komplexes Wort, mindestens 7 Zeichen.\n- Dice 3/4/5: Typen aus \"Gesten\"; \"Zeichnung\"; \"Ja/Nein (Raten)\"; \"Pasta modellieren\"; \"Töne\". In einer Karte müssen Dice 3/4/5 unterschiedliche Typen haben.\n- Für \"Ja/Nein (Raten)\" nur Ja/Nein-Fragen zulässig.\n- Keine Anweisungen in Phrase-Feldern der Standardwürfel; Anweisungen nur in Dice 6 Phrase der Spezialkarten und müssen Ziel und Methode enthalten.\n- Comments / Notes = '-', falls keine Hinweise.\n\nBEISPIEL\nC001;{{THEME}};Joystick;Wörter;magnetresonance;Umgekehrt;Pixel;Zeichnung;Knopf;Gesten;Gamepad;Töne;Ja/Nein: nur Fragen;{{AUTHOR}}\nS001;{{THEME}};Zeichne das Wort \"Boss\" in 1 Minute, Ziel: Team soll \"Boss\" erraten;Hardcore-Drawing;Standardzeit 1 Minute;{{AUTHOR}}",

    es: "Eres un generador de contenido para el juego \"Ekiwoki\". Tu tarea es crear dos conjuntos separados de cartas en formato CSV con punto y coma (;) como separador. Sal exactamente dos bloques de código separados, cada uno con un CSV. No imprimas nada fuera de los dos bloques CSV.\n\nParámetros de entrada (reemplazar antes de ejecutar):\nTheme: {{THEME}}\nStandard_Cards_Count: {{STANDARD_COUNT}}\nSpecial_Cards_Count: {{SPECIAL_COUNT}}\nAuthor: {{AUTHOR}}\n\nREGLAS GENERALES CSV\n- Todos los campos de texto en español.\n- Separador: punto y coma ';'.\n- NO usar ';' dentro de los valores. Usa coma o guion para separar partes dentro de un campo.\n- Campo vacío: usar '-'.\n- Todas las filas deben tener exactamente el mismo número de ';' que la cabecera.\n- Sin saltos de línea en campos.\n- IDs: cartas estándar C001, C002..., especiales S001, S002...\n- No añadir texto fuera de los dos bloques CSV.\n\nREGLAS DE DADOS Y CONTENIDO\n- Objetivo en todas las cartas: el equipo debe adivinar la palabra o frase objetivo.\n- Dice 1: tipo 'Palabras'. Dice 1 Phrase contiene solo la palabra/frase objetivo.\n- Dice 2: tipo 'Al revés'. Solo Dice 2 puede ser 'Al revés'. Dice 2 Phrase: una sola palabra larga/complicada, mínimo 7 caracteres.\n- Dice 3/4/5: tipos entre 'Gestos'; 'Dibujo'; 'Sí/No (Adivinanza)'; 'Plastilina'; 'Sonidos/Voz'. En una carta, los tipos deben ser distintos.\n- Para 'Sí/No (Adivinanza)' solo preguntas sí/no.\n- No usar instrucciones en Phrase de dados estándar; instrucciones solo en Dice 6 Phrase e incluir objetivo y método.\n- Comments / Notes = '-' si no hay pista.\n\nEJEMPLOS\nC001;{{THEME}};Joystick;Palabras;magnetorresonancia;Al revés;Pixel;Dibujo;Botón;Gestos;Gamepad;Sonidos;Sí/No: solo preguntas;{{AUTHOR}}\nS001;{{THEME}};Dibuja la palabra \"Boss\" en 1 minuto, objetivo: que el equipo adivine \"Boss\";Hardcore-Drawing;Tiempo por defecto 1 minuto;{{AUTHOR}}",

    it: "Sei un generatore di contenuti per il gioco \"Ekiwoki\". Il tuo compito è creare due set separati di carte in formato CSV con punto e virgola (;) come separatore. Produci esattamente due blocchi di codice separati, ciascuno contenente un CSV. Non stampare nulla al di fuori dei due blocchi CSV.\n\nParametri di input (sostituire prima dell'esecuzione):\nTheme: {{THEME}}\nStandard_Cards_Count: {{STANDARD_COUNT}}\nSpecial_Cards_Count: {{SPECIAL_COUNT}}\nAuthor: {{AUTHOR}}\n\nREGOLE GENERALI CSV\n- Tutti i campi testuali in italiano.\n- Separatore: punto e virgola ';'.\n- NON usare ';' all'interno dei valori dei campi. Usa virgola o trattino per separare parti all'interno di un campo.\n- Campo vuoto: inserire '-'.\n- Tutte le righe devono avere lo stesso numero di ';' dell'intestazione.\n- Nessun ritorno a capo nei campi.\n- ID: carte standard C001, C002..., speciali S001, S002...\n- Nessun testo aggiuntivo fuori dai due blocchi CSV.\n\nREGOLE DEI DADI E CONTENUTI\n- Obiettivo in tutte le carte: la squadra deve indovinare la parola o frase target.\n- Dice 1: tipo 'Parole'. Dice 1 Phrase contiene solo la parola/frase target.\n- Dice 2: tipo 'Al contrario'. Solo Dice 2 può essere 'Al contrario'. Dice 2 Phrase: una sola parola lunga/complessa, minimo 7 caratteri.\n- Dice 3/4/5: tipi tra 'Gesti'; 'Disegno'; 'Sì/No (Indovinare)'; 'Pasta modellabile'; 'Suoni/Voce'. In una carta i tipi devono essere diversi.\n- Per 'Sì/No (Indovinare)' solo domande sì/no.\n- Comments / Notes = '-' se nessun suggerimento.\n\nESEMPIO\nC001;{{THEME}};Joystick;Parole;magnetoresonance;Al contrario;Pixel;Disegno;Pulsante;Gesti;Gamepad;Suoni;Sì/No: solo domande;{{AUTHOR}}",

    zh: "你是桌游 \"Ekiwoki\" 的内容生成器。你的任务是生成两个独立的卡片集合，格式为 CSV，分隔符为分号 (;)。输出恰好两个独立的代码块，每个包含一个 CSV。除了这两个 CSV 代码块，不要输出任何其他内容。\n\n输入参数（在运行前替换示例）：\nTheme: {{THEME}}\nStandard_Cards_Count: {{STANDARD_COUNT}}\nSpecial_Cards_Count: {{SPECIAL_COUNT}}\nAuthor: {{AUTHOR}}\n\n通用 CSV 规则\n- 所有文本字段使用中文。\n- 分隔符：分号 ';'。\n- 不得在字段值中使用字符 ';'。若需在字段内分隔部分内容，请使用逗号或连字符。\n- 若字段为空，必须填入占位符 '-'。适用于所有字段，包括 Comments / Notes。\n- 所有行必须与表头具有相同数量的 ';' 分隔符。\n- 字段不得包含换行符。\n- 标识符：标准卡片 — C001、C002...，特殊卡片 — S001、S002...\n- 不要在两个 CSV 代码块之外输出任何文本。\n\n骰子规则与内容\n- 在所有卡片中，任务目标始终相同：团队必须猜出指定的单词或短语。任何动作（绘画、捏塑、手势、声音等）都仅用于帮助团队猜出 Phrase 字段或指令中指定的目标词/短语。\n- Dice 1 始终为类型 '词语'。Dice 1 Phrase 仅包含目标词/短语。\n- Dice 2 始终为类型 '反向'。其他骰子不得为 '反向'。Dice 2 Phrase 必须为单个单词，较长或复杂，至少 7 个字符。\n- Dice 3、4、5 的类型从以下集合中选择：'手势'; '绘画'; '是/否（猜词）'; '黏土'; '声音/配音'。在同一张卡中，Dice 3、4、5 的类型必须互不相同。\n- 对于 '是/否（猜词）'，只能通过是/否问题来猜词。将目标词放在 Phrase 字段；可在 Comments / Notes 中写 '是/否：仅限是/否问题'。\n- 不要在标准骰子的 Phrase 字段中使用指令；指令仅允许出现在特殊卡的 Dice 6 Phrase 中，且必须包含目标词和方法。\n- 若无提示，Comments / Notes 填写 '-'.\n\n示例行\nC001;{{THEME}};操纵杆;词语;磁共振;反向;像素;绘画;按钮;手势;手柄;声音;是/否：仅限是/否问题;{{AUTHOR}}\nS001;{{THEME}};在 1 分钟内画出单词 \"Boss\"，目标：让团队猜出 \"Boss\";Hardcore-Drawing;默认时间 1 分钟;{{AUTHOR}}"
};

export function buildPrompt({theme, author, standardCount, specialCount, lang = 'en'} = {}) {
    const language = (lang || 'en').toLowerCase();
    const template = promptTemplates[language] || promptTemplates.en;
    return template
        .replace(/{{THEME}}/g, (theme || '').toString() || 'THEME')
        .replace(/{{AUTHOR}}/g, (author || '').toString() || 'AI')
        .replace(/{{STANDARD_COUNT}}/g, String(standardCount != null ? standardCount : 10))
        .replace(/{{SPECIAL_COUNT}}/g, String(specialCount != null ? specialCount : 5));
}

// Example usage:
// const prompt = buildPrompt({ theme: 'ИГРЫ И ПРИСТАВКИ', author: 'AI', standardCount: 10, specialCount: 5, lang: 'ru' });
